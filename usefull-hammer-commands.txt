    1  pushd /usr/local/lib
    2  cntsrv=content.example.com
    3  crsdir=courses/rh403/rhsat6.2.1/infrastructure
    4  wget http://${cntsrv}/${crsdir}/build-satellite.sh
    5  chmod +x build-satellite.sh
    6  popd
    7  /usr/local/lib/build-satellite.sh 
    8  shutdown -h now
    9  history
   10  ls /usr/local/lib
   11  less /usr/local/lib/build-satellite.sh 
   12  yum repolist
   13  ls /tmp
   14  ls
   15  chmod u+x install_satellite.sh 
   16  ./install_satellite.sh 
   17  less install_satellite.sh 
   18  vim install_satellite.sh 
   19  cat install_satellite.sh
   20  mount -o loop /tmp/satellite-6.2.1-rhel-7-x86_64-dvd.iso /mnt/isos
   21  umount /mnt/isos
   22  vim install_satellite.sh 
   23  ./install_satellite.sh 
   24  vim install_satellite.sh 
   25  ./install_satellite.sh 
   26  ls /tmp
   27  df -h
   28  cd /mnt/isos
   29  ls
   30  ./install_packages 
   31  # run satellite installer script
   32  satellite-installer --scenario satellite --foreman-adminuser admin --foreman-admin-password redhat
   33  satellite-installer --scenario satellite --help | grep foreman-u
   34  satellite-installer --scenario satellite --help | grep foreman-ad
   35  # run satellite installer script
   36  satellite-installer --scenario satellite --foreman-admin-username admin --foreman-admin-password redhat --foreman-admin-email 'admin@satellite.lab.example.com'
   37  tail /var/log/foreman-installer/satellite.log 
   38  cd
   39  ls
   40  firewall-cmd --permanent --add-service=RH-Satellite-6 && firewall-cmd --reload
   41  ls
   42  cat install_satellite.sh 
   43  rm -f install_satellite.sh 
   44  ls
   45  HAMLOC='~/.hammer/'
   46  HAMCONF=cli_config.yml
   47  cat > ${HAMLOC}${HAMCONF} << EOF
:foreman:
  :host: 'satellite.lab.example.com'
  :username: 'admin'
  :password: 'redhat'
EOF

   48  #chmod 0600 ${HAMLOC}${HAMCONF}
   49  mkdir -p ~/.hammer
   50  cat > ${HAMLOC}${HAMCONF} << EOF
:foreman:
  :host: 'satellite.lab.example.com'
  :username: 'admin'
  :password: 'redhat'
EOF

   51  chmod 0600 ${HAMLOC}${HAMCONF}
   52  ls -la
   53  ls .hammer/
   54  history
   55  cat /usr/local/lib/build-satellite.sh 
   56  ls
   57  bash config_hammercli.sh 
   58  hammer
   59  hammer --help
   60  rm -f .hammer/cli_config.yml 
   61  hammer
   62  ls
   63  rm config_hammercli.sh 
   64  cp hammer_cli_creds.txt .hammer/cli_config.yml
   65  vim .hammer/cli_config.yml 
   66  hammer
   67  hammer organization list
   68  hammer user create help
   69  hammer user create --help
   70  hammer role list
   71  hammer host-collection --help
   72  hammer host-collection create --help
   73  hammer organization create --name Operations
   74  hammer organization list
   75  hammer organization create --name Finance
   76  hammer organization list
   77  hammer location create --name 'Boston'
   78  hammer location create --name 'San Francisco'
   79  hammer location create --name 'Tokyo'
   80  hammer location list
   81  hammer location add-organization --name 'Boston' --organization Operations
   82  hammer organization info --name Operations | grep Locations -A3
   83  # add locations to organization Finance
   84  hammer location add-organization --name 'San Francisco' --organization Finance
   85  hammer location add-organization --name 'Tokyo' --organization Finance
   86  hammer organization info --name Finance | grep Locations -A3
   87  hammer user create --login linda  --auth-source-id 1 --locations 'San Francisco' --organization 'Finance' --mail linda@workstation.lab.example.com --password redhat
   88  hammer user create --login ito --auth-source-id 1 --locations 'Tokyo' --organizations 'Finance' --mail ito@workstation.lab.example.com --password redhat
   89  hammer user create --login linda  --auth-source-id 1 --locations 'San Francisco' --organizations 'Finance' --mail linda@workstation.lab.example.com --password redhat
   90  hammer role list
   91  hammer user add-role --login linda  --role-id 11
   92  hammer user add-role --login ito --role-id 7
   93  # create host collections FinDesktops and FinServers in the Finance organization
   94  hammer host-collection create --organization 'Finance' --name FinDesktops
   95  hammer host-collection create --organization 'Finance' --name FinServers
   96  hammer host-collection --organization 'Finance' list
   97  # create host collections OpsDesktops and OpsServers in the Operations organization
   98  hammer host-collection create --organization 'Operations' --name OpsDesktops
   99  hammer host-collection create --organization 'Operations' --name OpsServers
  100  hammer host-collection --organization 'Operations' list
  101  hammer host-collection --help
  102  hammer host-collection list --help
  103  hammer host-collection --organization 'operations' list
  104  hammer host-collection list --organization 'Operations'
  105  hammer subscription upload --help
  106  hammer subscription upload --organization 'Finance' --file http://classroom.example.com/content/courses/rh403/rhsat6.2.1/materials/manifest_finance.zip --repository-url 'http://content.example.com/rhsat6.2.1/cdn/'
  107  wget http://classroom.example.com/content/courses/rh403/rhsat6.2.1/materials/manifest_finance.zip
  108  hammer subscription upload --organization 'Finance' --file manifest_finance.zip --repository-url 'http://content.example.com/rhsat6.2.1/cdn/'
  109  wget http://classroom.example.com/content/courses/rh403/rhsat6.2.1/materials/manifest_acme.zip
  110  wget http://classroom.example.com/content/courses/rh403/rhsat6.2.1/materials/manifest_finance.zip
  111  wget http://classroom.example.com/content/courses/rh403/rhsat6.2.1/materials/manifest_operations.zip
  112  hammer subscription upload --organization 'Operations' --file manifest_operations.zip --repository-url 'http://content.example.com/rhsat6.2.1/cdn/'
  113  hammer subscription upload --organization 'Finance' --file manifest_finance.zip --repository-url 'http://content.example.com/rhsat6.2.1/cdn/'
  114  hammer subscription upload --organization 'Default_Organization' --file manifest_acme.zip --repository-url 'http://content.example.com/rhsat6.2.1/cdn/'
  115  hammer organization list
  116  hammer subscription list
  117  hammer subscription list --organization 'Finance'
  118  hammer subscription list --organization 'Operations'
  119  hammer subscription list --organization 'Default_Organization'
  120  hammer subscription list --organization 'Default Organization'
  121  hammer subscription upload --organization 'Default Organization' --file manifest_acme.zip --repository-url 'http://content.example.com/rhsat6.2.1/cdn/'
  122  hammer repository --help
  123  hammer repository list --organization 'Default Organization'
  124  hammer 
  125  hammer repository-set
  126  hammer repository-set list
  127  hammer repository-set available-repositories
  128  hammer repository-set available-repositories --help
  129  hammer repository-set available-repositories --organization 'Default Organization'
  130  #hammer repository-set enable --organization "Default Organization"
  131  hammer repository-set enable --organization "Default Organization" --product "Red Hat Enterprise Linux Server" --basearch "x86_64" --releasever "7Server" --name "Red Hat Enterprise Linux Server (RPMS)"
  132  hammer repository-set --help
  133  hammer repository-set list --help
  134  hammer product
  135  hammer product list
  136  hammer product list --organization "Default Organization"
  137  hammer repository-set list --help
  138  hammer repository-set list --product-id 27
  139  hammer repository-set list --product-id 27 | grep Tools
  140  hammer repository-set enable --organization "Default Organization" --product-id 27 --basearch "x86_64" --releasever "7Server" --name "Red Hat Enterprise Linux Server (RPMS)"
  141  hammer repository-set list 
  142  hammer repository-set list --organization 'Finance' --product-id 27
  143  hammer repository-set enable --help
  144  hammer repository-set enable basearch 'x86_64' id 2456 --name "Red Hat Enterprise Linux (RPMS)" organization 'Finance' --releasever '7Server' --product-id 27
  145  hammer repository-set enable --basearch 'x86_64' --id 2456 --name "Red Hat Enterprise Linux (RPMS)" --organization 'Finance' --releasever '7Server' --product-id 27
  146  hammer repository list --organization 'Finance'
  147  hammer product list --organization 'Finance'
  148  hammer product list --organization 'Operations'
  149  hammer product list --organization 'Default Organization'
  150  hammer repository-set list --organization 'Finance' --product-id 7
  151  hammer repository-set list --organization 'Finance' --product-id 7 | grep 7
  152  hammer repository-set list --organization 'Finance' --product-id 7 | grep "RHN Tools"
  153  hammer repository-set list --organization 'Finance' --product-id 7 | grep "Red Hat Satellite Tools 6.2"
  154  hammer repository-set list --organization 'Finance' --product-id 7 | grep "Red Hat Enterprise Linux 7"
  155  hammer repository-set list --organization 'Operations' --product-id 17 | grep "Red Hat Satellite Tools 6.2"
  156  hammer repository-set list --organization 'Finance' --product-id 7 | grep "Red Hat Enterprise Linux 7 (RPM"
  157  hammer repository-set list --organization 'Finance' --product-id 7 | grep "Red Hat Enterprise Linux 7"
  158  hammer repository-set list --organization 'Operations' --product-id 17 | grep "Red Hat Enterprise Linux 7 Server (RPM"
  159* hammer repository-set list --organization 'Default Organization' --product-id 27 | grep "Red Hat"
  160  hammer repository-set list --organization 'Default Organization' --product-id 27 | grep "Red Hat Satellite Tools 6.2"
  161  hammer repository-set --help
  162  hammer repository-set available-repositories --help
  163  hammer repository-set available-repositories --id 7 --organization 'Finance'
  164  hammer repository-set available-repositories --product-id 7 --organization 'Finance'
  165  hammer repository-set available-repositories --id 2456 --product-id 7 --organization 'Finance'
  166  hammer repository-set enable --id 2456 --product-id 7 --organization 'Finance'
  167  hammer repository-set enable --id 2456 --product-id 7 --organization 'Finance' --basearch 'x86_64' --releasever '7Server'
  168  hammer repository-set available-repositories --id 2456 --product-id 7 --organization 'Finance'
  169  hammer repository-set enable --id 4831 --product-id 7 --organization 'Finance' --basearch 'x86_64' --releasever '7Server'
  170  hammer repository-set enable --id 4831 --product-id 7 --organization 'Finance' --basearch 'x86_64'
  171  history
  172  hammer repository-set list --organization 'Finance' --product-id 7 | grep "RHN Tools"
  173  hammer repository-set list --organization 'Finance' --product-id 7 | grep "Red Hat Satellite Tools 6.2"
  174  #hammer repository-set enable --id 4831 --product-id 7 --organization 'Finance' --basearch 'x86_64'
  175  #hammer repository-set enable --id 2456 --product-id 27 --organization 'Default Organization' --basearch 'x86_64' --releasever '7Server'
  176  hammer repository-set enable --id 2456 --product-id 27 --organization 'Default Organization' --basearch 'x86_64' --releasever '7Server'
  177  #hammer repository-set enable --id 2456 --product-id 27 --organization 'Default Organization' --basearch 'x86_64' --releasever '7Server'
  178  ammer repository-set enable --id 2456 --product-id 17 --organization 'Operations' --basearch 'x86_64' --releasever '7Server'
  179  hammer repository-set enable --id 2456 --product-id 17 --organization 'Operations' --basearch 'x86_64' --releasever '7Server'
  180  hammer repository-set enable --id 4831 --product-id 17 --organization 'Operations' --basearch 'x86_64'
  181  hammer repository synchronize --help
  182  hammer repository synchronize --organization 'Finance' --id 4831 --product-id 7 --async
  183  hammer repository list --organization 'Finance'
  184  hammer repository synchronize --organization 'Finance' --id 4 --product-id 7 --async
  185* hammer repository synchronize --organization 'Operations' --id 3 --product-id 7 --async
  186  hammer repository list --organization 'Operations'
  187  hammer repository list --organization 'Operations' | cut -d" " -f1
  188  hammer repository list --organization 'Operations'
  189  hammer repository list --organization 'Operations' | grep yum | cut -f1
  190  man cut
  191  hammer repository list --organization 'Operations' | grep yum | cut -b 1
  192  hammer repository list --organization 'Operations' | grep "Satellite Tools" | cut -b 1
  193  hammer repository list --organization 'Operations' | grep "Enterprise Linux" | cut -b 1
  194  hammer repository list --organization 'Operations'
  195  hammer repository list --organization 'Operations' | grep "Enterprise Linux 7 RPMs" | cut -b 1
  196  hammer repository list --organization 'Operations' | grep "Enterprise Linux 7 Server RPMs" | cut -b 1
  197  ORG='Finance'
  198  RHT_${ORG}=bla
  199  RHT_'${ORG}'=bla
  200  hammer task progress
  201  hammer task progress --help
  202  hammer task list
  203  hammer lifecycle
  204  hammer lifecycle-environment list
  205  hammer lifecycle-environment list --organization 'Finance'
  206  hammer lifecycle-environment create --help
  207  hammer lifecycle-environment create --organization 'Finance' --label 'Dev' --name 'Dev' --prior 'Library'
  208  hammer lifecycle-environment list --organization 'Finance'
  209  hammer lifecycle-environment create --organization 'Finance' --label 'Prod' --name 'Prod' --prior 'Dev'
  210  hammer lifecycle-environment list --organization 'Finance'
  211  hammer content-view list --organization 'Finance'
  212  hammer content-view create --help
  213* hammer content-view create --organization 'Finance' --name 'Base' --product-id 7 --
  214  hammer repository list --organization 'Finance'
  215  hammer repository list --organization 'Operations'
  216  hammer content-view create --help
  217  hammer content-view create --organization 'Finance' --name 'Base' --label 'base' --product 7 --repository-ids 3,4
  218  hammer content-view create --organization 'Finance' --name 'Base' --label 'base' --product-id 7 --repository-ids 3,4
  219  hammer product list --help
  220  hammer product list --enabled --organization 'Finance'
  221  hammer product list --enabled true --organization 'Finance'
  222  hammer
  223  hammer content-view create --organization 'Finance' --name 'Base' --label 'base'
  224  hammer content-view create --organization 'Operations' --name 'Base' --label 'base'
  225  hammer content-view --help
  226  hammer content-view add-repository --help
  227  hammer content-view add-repository --name base --organization 'Operations' repository-ids 5,6
  228  hammer content-view add-repository --name base --organization 'Operations' --repository-ids 5,6
  229  hammer content-view add-repository --name base --organization 'Operations' --repository-id 5
  230  hammer content-view add-repository --name 'Base' --organization 'Operations' --repository-id 5
  231  hammer content-view add-repository --name 'Base' --organization 'Operations' --repository-id 6
  232  hammer content-view --help
  233  hammer content-view filter --help
  234* hammer content-view filter create --content-view 'Base' --organization 'Operations' --help
  235  history
  236  history > usefull-hammer-commands.txt
